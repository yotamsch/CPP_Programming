COMP = g++-5.3.0
OBJS = AlgorithmRegistration.o GameManager.o main.o MyBoard.o MyFightInfo.o TournamentManager.o
EXEC = ex3
CPP_COMP_FLAG = -std=c++14 -Wall -Wextra \
-Werror -pedantic-errors -DNDEBUG

$(EXEC): $(OBJS) RSPPlayer_308550441.so
	$(COMP) $(OBJS) -rdynamic -ldl -pthread -o $@
RSPPlayer_308550441.so: RSPPlayer_308550441.o
	$(COMP) RSPPlayer_308550441.o -shared -o $@
AlgorithmRegistration.o: AlgorithmRegistration.cpp AlgorithmRegistration.h PlayerAlgorithm.h Point.h PiecePosition.h \
							Board.h FightInfo.h Move.h JokerChange.h TournamentManager.h
	$(COMP) $(CPP_COMP_FLAG) -c $*.cpp
GameManager.o: GameManager.cpp GameManager.h PlayerAlgorithm.h Point.h PiecePosition.h Board.h FightInfo.h Move.h \
							JokerChange.h MyBoard.h MyPiecePosition.h MyPoint.h Generals.h MyFightInfo.h
	$(COMP) $(CPP_COMP_FLAG) -c $*.cpp
main.o: main.cpp TournamentManager.h PlayerAlgorithm.h Point.h PiecePosition.h Board.h FightInfo.h Move.h JokerChange.h
	$(COMP) $(CPP_COMP_FLAG) -c $*.cpp
MyBoard.o: MyBoard.cpp MyBoard.h Board.h MyPiecePosition.h PiecePosition.h MyPoint.h Point.h FightInfo.h Generals.h \
							Move.h JokerChange.h MyFightInfo.h
	$(COMP) $(CPP_COMP_FLAG) -c $*.cpp
MyFightInfo.o: MyFightInfo.cpp MyFightInfo.h FightInfo.h MyPoint.h Point.h
	$(COMP) $(CPP_COMP_FLAG) -c $*.cpp
TournamentManager.o: TournamentManager.cpp TournamentManager.h PlayerAlgorithm.h Point.h PiecePosition.h Board.h \
							FightInfo.h Move.h JokerChange.h GameManager.h MyBoard.h MyPiecePosition.h MyPoint.h Generals.h
	$(COMP) $(CPP_COMP_FLAG) -c $*.cpp
RSPPlayer_308550441.o: RSPPlayer_308550441.cpp RSPPlayer_308550441.h PlayerAlgorithm.h Point.h PiecePosition.h \
							Board.h FightInfo.h Move.h JokerChange.h MyMove.h MyPoint.h Generals.h MyPiecePosition.h \
							AlgorithmRegistration.h
	$(COMP) -fPIC $(CPP_COMP_FLAG) -c $*.cpp
.PHONY: all
all: $(EXEC)
clean:
	rm -f $(OBJS) RSPPlayer_308550441.so RSPPlayer_308550441.o $(EXEC)
